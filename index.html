<!-- Index page: Controls blurb for main pages (faq,report,contact) and general layout/pos/buttons-->

<!DOCTYPE html>
<html lang="en">
<head>
  
  <!-- Meta data -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#103012">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <title>Oak Logger</title>
    <link rel="icon" href="graphics/icons/icon-192.png" sizes="192x192">
    <link rel="icon" href="graphics/icons/icon-512.png" sizes="512x512">
    <link rel="icon" href="graphics/icons/favicon.ico" type="image/x-icon">
</head>
<body>

<!-- Wrapper maintains overall app structure -->
<div class="wrapper">
    


    <!-- Splash Page: main page, has logo defs -->
    <div id="splashPage" class="page active">
        <div id="splashHeader">
            <img src="graphics/icons/icon-512.png" alt="Left Logo" class="splash-logo left">
            <h1>Oak Logger</h1>
            <img src="graphics/aberlogo.png" alt="Right Logo" class="splash-logo right">
        </div>
        <div class="text-container">
            <p>Capture and log Oak tree health data easily. Click Start to begin logging trees. If you have any questions, please check our FAQs, reach out, or report an error.</p>
        </div>
        <div class="button-container">
            <button class="main-btn" id="logOakBtn">Log an Oak</button>
            <button class="main-btn" id="reportErrorBtn">Report an Error</button>
            <button class="main-btn" id="faqBtn">FAQ</button>
            <button class="main-btn" id="contactUsBtn">Contact Us</button>
        </div>
    </div>



    <!-- Log Oak Page -->
    <div id="logOakPage" class="page">
        <div class="subpage-header">
            <button class="back-btn" id="logOakBackBtn">
                <img src="graphics/arrow.png" alt="Back">
            </button>
            <h1 class="subpage-title">Log an Oak</h1>
        </div>
        <p>To start logging Oaks, please enter how many trees you intend to log:</p>

         <input type="number" id="treeCountInput" class="input-field" min="1" max="100" placeholder="e.g. 5">

        <button class="nav-btn" id="startLoggingBtn">Start</button>
    </div>

    <!-- Ready to log page - ensures that GEO/TS/UID are collected at the correct time. -->
    <div id="readyToLogPage" class="page">
    <div class="subpage-header">
        <button class="back-btn" id="readyToLogBackBtn">
            <img src="graphics/arrow.png" alt="Back">
        </button>
        <h1 class="subpage-title">Ready to Begin</h1>
    </div>
    <p>Please ensure you're standing next to the tree you wish to log. Starting will record your location and begin the logging process.</p>
    <button class="nav-btn" id="confirmTreeBtn">Start Logging This Tree</button>
</div>

    <!-- Dynamic Question Page -->
    <div id="questionPage" class="page">
        <h2 id="questionTitle"></h2>
        <div id="questionContainer"></div>
        <div class="button-container">
            <button id="cancelButton" class="nav-btn cancel-btn" onclick="cancelSubmission()">Cancel</button>
            <button class="nav-btn" id="nextBtn" onclick="nextQuestion()">Next</button>
            <button class="nav-btn" id="backBtn" onclick="prevQuestion()">Back</button>
            <button class="nav-btn" id="submitBtn" onclick="downloadCSV()" style="display:none;">Submit & Download CSV</button>
        </div>
    </div>



    <!-- Report Error Page (probably makes sense to make error reporting some kind of form) -->
    <div id="reportErrorPage" class="page">
        <div class="subpage-header">
            <button class="back-btn" id="reportErrorBackBtn">
                <img src="graphics/arrow.png" alt="Back">
            </button>
            <h1 class="subpage-title">Report an Error</h1>
        </div>
        <p>If something doesn’t seem to be working correctly, please let us know.</p>
        <a href="mailto:support@example.com?subject=Error Report for Oak Health Web-App">Report an Error</a>
        <p>Please provide as much detail as possible, including what went wrong and the conditions under which it occurred.</p>
    </div>



    <!-- FAQ Page (probably makes sense to import text from a file if FAQs are large)-->
    <div id="faqPage" class="page">
        <div class="subpage-header">
            <button class="back-btn" id="faqBackBtn">
                <img src="graphics/arrow.png" alt="Back">
            </button>
            <h1 class="subpage-title">FAQ</h1>
        </div>
        <p>Below you'll find answers to common questions about using the Oak Logger app. For tips and guidance on individual questions during logging, tap the “?” icon next to each prompt.</p>
        <p><strong>1. What should I do if I can’t get a GPS signal?</strong><br>If GPS isn't working, try moving to an open area. If it still doesn’t work, you can continue logging, but location data may be incomplete.</p>
        <p><strong>2. Can I edit a tree entry after I’ve submitted it?</strong><br>Currently, the app does not support editing after submission. If a mistake was made, re-log the tree with corrected details.</p>
        <p><strong>3. Why are some fields optional while others are required?</strong><br>Required fields ensure consistent data collection. Optional fields offer additional context but won’t block submission.</p>
        <p><strong>4. I’ve found a bug. How do I report it?</strong><br>Use the “Report an Error” option from the home screen and include as much detail as possible.</p>
    </div>



    <!-- Contact Us Page -->
    <div id="contactUsPage" class="page">
        <div class="subpage-header">
            <button class="back-btn" id="contactUsBackBtn">
                <img src="graphics/arrow.png" alt="Back">
            </button>
            <h1 class="subpage-title">Contact Us</h1>
        </div>
        <p>If your question isn’t answered in the FAQ, feel free to get in touch by clicking the link below. We’re happy to help.</p>
        <a href="mailto:support@example.com?subject=Oak Health Web-App Query">Contact Us</a>
    </div>

    <footer>
        <img src="graphics/footer.png" alt="Footer Image">
    </footer>
</div>




<!-- Checks on user device suitablilty (have teested by removing functionality but not on multiple devices) -->

<noscript>
    <div class="warning">
        This web app requires JavaScript to function. Please enable JavaScript in your browser settings.
    </div>
</noscript>

<script type="module" src="app.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
            .then(reg => console.log('Service Worker registered:', reg.scope))
            .catch(err => console.error('Service Worker registration failed:', err));
    } else {
        alert('This site requires service-workers to log trees.');
    }

    if (!('geolocation' in navigator)) {
        alert('Geolocation is required to log a tree.');
    }

    if (!('localStorage' in window)) {
        alert('Local storage is required to download your logged trees to your device.');
    }

    if (window.matchMedia('(display-mode: standalone)').matches) {
        console.log('App is running in PWA mode');
    } else {
        console.log('App is running in browser/tab mode');
    }


</script>
</body>
</html>